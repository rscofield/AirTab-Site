{if logged_in}
{if segment_3 == "iphone"}
<script type="text/javascript">
    window.location.href="/mobile/api/login_success/iphone";
</script>
{if:elseif segment_3 == "android"}
  <script type="text/javascript">
    parent.registerComplete();
  </script>
{if:elseif segment_3 == "establishment"}
  <script type="text/javascript">
    window.location.href="#/register/complete/establishment";
  </script>
{if:else}
<script type="text/javascript">
    window.location.href="#/register/complete";
</script>
{/if}
{/if}
{exp:airtab:log_page_load}

<div class="page-signin">
    {if segment_3 != "iphone"}
    <div class="signin-header">
        <div class="container text-center">
            <section class="logo">
                <a href="#/"><img src="//airtab.me/assets/airtab/img/logo.png" /></a>
            </section>
        </div>
    </div>
    {/if}
    {if segment_3 == "iphone"}<button type="submit" onClick="window.location.href='/dashboard/#/mobile/login';" class="btn btn-danger btn-lg btn-block">Already Have An Account?</button>{/if}
    {if segment_3 == "establishment"}
      <button type="submit" onClick="window.location.href='/dashboard/#/login/establishment';" class="btn btn-danger btn-lg btn-block">Already Have An Account?</button>
    {/if}
    <div class="signin-body">

    <section class="panel panel-default">
        <div class="panel-body" data-ng-controller="AccordionDemoCtrl">
            <div class="text-center">
						{if segment_3 == "establishment"}
							<h3>Establishment Member Registration</h3>
						{if:else}
							<h3>Member Registration</h3>
						{/if}
            <p>Fill out the fields below to create an AirTab account.</p>
            
            </div>
            <div class="col-md-12 text-center">
                <div class="form-container" id="registerCtrl" style="padding:0 20px 0 20px;max-width:none!important;" data-ng-controller="registerCtrl">
                    {exp:simple_registration:form id="form_register" name="form_register" allow_fields="bday" class="form-horizontal form-validation" return="/dashboard/#/invite/complete/{segment_3}" ajax="y" action="https://airtab.me" honeypot="age"}

                    <fieldset>
                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                </span>
                                <input type="text"
                                        name="FName"
                                       class="form-control"
                                       placeholder="First Name"
                                       data-ng-model="user.FName"
                                       required
                                       data-ng-minlength="2"
                                       >
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                </span>
                                <input type="text"
                                        name="LName"
                                       class="form-control"
                                       placeholder="Last Name"
                                       data-ng-model="user.LName"
                                       required
                                       data-ng-minlength="2"
                                       >
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-user"></span>
                                </span>
                                <input type="text"
                                        name="username"
                                       class="form-control"
                                       placeholder="Enter Username"
                                       data-ng-model="user.username"
                                       data-ng-minlength="4"
                                       required
                                       tooltip="This is the name you will use to login to AirTab. (Must be at least 4 characters long)"
                                       data-toggle="tooltip"
                                       data-placement="top"
                                       tooltip-trigger="focus"
                                       autocapitalize="off"
                                        autocorrect="off"
                                       >
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-envelope"></span>
                                </span>
                                <input type="email"
                                        name="email"
                                       class="form-control{if error:username} input-danger{/if}"
                                       placeholder="Email Address"
                                       data-ng-model="user.email"
																			 required
                                       autocapitalize="off"
                                        autocorrect="off"
                                       >
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon optional">
                                    <span class="glyphicon glyphicon-phone"></span>
                                </span>
                                <input type="tel"
                                        name="Phone"
                                       class="form-control"
                                       placeholder="Mobile Phone #"
                                       data-ng-model="user.Phone"
                                       data-ng-pattern="/^[0-9]+$/"
                                       data-ng-minlength="10"
                                       tooltip="Your 10 digit mobile phone number. This field is optional."
                                       data-toggle="tooltip"
                                       data-placement="top"
                                       tooltip-trigger="focus"
                                       autocapitalize="off"
                                        autocorrect="off"
                                       >
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-lock"></span>
                                </span>
                                <input type="password"
                                       class="form-control"
                                       placeholder="Your Password"
                                       name="password"
                                       data-ng-model="user.password"
                                       required
                                       data-ng-minlength="6"
                                       data-ng-maxlength="16"
                                       
                                       tooltip="Must be at least 6 characters in length."
                                       data-toggle="tooltip"
                                       data-placement="top"
                                       tooltip-trigger="focus"
                                       autocapitalize="off"
                                        autocorrect="off"
                                       >
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-lock"></span>
                                </span>
                                <input type="password"
                                       class="form-control"
                                       placeholder="Confirm Password"
                                       name="password_confirm"
                                       data-ng-model="user.password_confirm"
                                       required
                                       data-validate-equals="user.password"
                                       data-ng-minlength="6"
                                       data-ng-maxlength="16"
                                       tooltip="Must match the password you entered above."
                                       data-toggle="tooltip"
                                       data-placement="top"
                                       tooltip-trigger="focus"
                                       autocapitalize="off"
                                        autocorrect="off"
                                       >
                            </div>
                        </div>

                        <div class="form-group">
                          <h4>Enter Your Date of Birth</h4>
                          <span class="ui-select">
                              <select name="bday_y" id="bday_y" required data-ng-model="user.bday_y" ng-change="updateBday()">
                                <option value="" selected="selected">Year</option>
                                <option value="2014">2014</option>
                                <option value="2013">2013</option>
                                <option value="2012">2012</option>
                                <option value="2011">2011</option>
                                <option value="2010">2010</option>
                                <option value="2009">2009</option>
                                <option value="2008">2008</option>
                                <option value="2007">2007</option>
                                <option value="2006">2006</option>
                                <option value="2005">2005</option>
                                <option value="2004">2004</option>
                                <option value="2003">2003</option>
                                <option value="2002">2002</option>
                                <option value="2001">2001</option>
                                <option value="2000">2000</option>
                                <option value="1999">1999</option>
                                <option value="1998">1998</option>
                                <option value="1997">1997</option>
                                <option value="1996">1996</option>
                                <option value="1995">1995</option>
                                <option value="1994">1994</option>
                                <option value="1993">1993</option>
                                <option value="1992">1992</option>
                                <option value="1991">1991</option>
                                <option value="1990">1990</option>
                                <option value="1989">1989</option>
                                <option value="1988">1988</option>
                                <option value="1987">1987</option>
                                <option value="1986">1986</option>
                                <option value="1985">1985</option>
                                <option value="1984">1984</option>
                                <option value="1983">1983</option>
                                <option value="1982">1982</option>
                                <option value="1981">1981</option>
                                <option value="1980">1980</option>
                                <option value="1979">1979</option>
                                <option value="1978">1978</option>
                                <option value="1977">1977</option>
                                <option value="1976">1976</option>
                                <option value="1975">1975</option>
                                <option value="1974">1974</option>
                                <option value="1973">1973</option>
                                <option value="1972">1972</option>
                                <option value="1971">1971</option>
                                <option value="1970">1970</option>
                                <option value="1969">1969</option>
                                <option value="1968">1968</option>
                                <option value="1967">1967</option>
                                <option value="1966">1966</option>
                                <option value="1965">1965</option>
                                <option value="1964">1964</option>
                                <option value="1963">1963</option>
                                <option value="1962">1962</option>
                                <option value="1961">1961</option>
                                <option value="1960">1960</option>
                                <option value="1959">1959</option>
                                <option value="1958">1958</option>
                                <option value="1957">1957</option>
                                <option value="1956">1956</option>
                                <option value="1955">1955</option>
                                <option value="1954">1954</option>
                                <option value="1953">1953</option>
                                <option value="1952">1952</option>
                                <option value="1951">1951</option>
                                <option value="1950">1950</option>
                                <option value="1949">1949</option>
                                <option value="1948">1948</option>
                                <option value="1947">1947</option>
                                <option value="1946">1946</option>
                                <option value="1945">1945</option>
                                <option value="1944">1944</option>
                                <option value="1943">1943</option>
                                <option value="1942">1942</option>
                                <option value="1941">1941</option>
                                <option value="1940">1940</option>
                                <option value="1939">1939</option>
                                <option value="1938">1938</option>
                                <option value="1937">1937</option>
                                <option value="1936">1936</option>
                                <option value="1935">1935</option>
                                <option value="1934">1934</option>
                                <option value="1933">1933</option>
                                <option value="1932">1932</option>
                                <option value="1931">1931</option>
                                <option value="1930">1930</option>
                                <option value="1929">1929</option>
                                <option value="1928">1928</option>
                                <option value="1927">1927</option>
                                <option value="1926">1926</option>
                                <option value="1925">1925</option>
                                <option value="1924">1924</option>
                                <option value="1923">1923</option>
                                <option value="1922">1922</option>
                                <option value="1921">1921</option>
                                <option value="1920">1920</option>
                                <option value="1919">1919</option>
                                <option value="1918">1918</option>
                                <option value="1917">1917</option>
                                <option value="1916">1916</option>
                                <option value="1915">1915</option>
                                <option value="1914">1914</option>
                                <option value="1913">1913</option>
                                <option value="1912">1912</option>
                                <option value="1911">1911</option>
                                <option value="1910">1910</option>
                                <option value="1909">1909</option>
                                <option value="1908">1908</option>
                                <option value="1907">1907</option>
                                <option value="1906">1906</option>
                                <option value="1905">1905</option>
                              </select>
                          </span>
                          <span class="ui-select">
                            <select name="bday_m" id="bday_m" required data-ng-model="user.bday_m" ng-change="updateBday()">
                              <option value="" selected="selected">Month</option>
                              <option value="01">January</option>
                              <option value="02">February</option>
                              <option value="03">March</option>
                              <option value="04">April</option>
                              <option value="05">May</option>
                              <option value="06">June</option>
                              <option value="07">July</option>
                              <option value="08">August</option>
                              <option value="09">September</option>
                              <option value="10">October</option>
                              <option value="11">November</option>
                              <option value="12">December</option>
                            </select>
                          </span>
                          <span class="ui-select">
                            <select name="bday_d" id="bday_d" required data-ng-model="user.bday_d" ng-change="updateBday()">
                              <option value="" selected="selected">Day</option>
                              <option value="01">1</option>
                              <option value="02">2</option>
                              <option value="03">3</option>
                              <option value="04">4</option>
                              <option value="05">5</option>
                              <option value="06">6</option>
                              <option value="07">7</option>
                              <option value="08">8</option>
                              <option value="09">9</option>
                              <option value="10">10</option>
                              <option value="11">11</option>
                              <option value="12">12</option>
                              <option value="13">13</option>
                              <option value="14">14</option>
                              <option value="15">15</option>
                              <option value="16">16</option>
                              <option value="17">17</option>
                              <option value="18">18</option>
                              <option value="19">19</option>
                              <option value="20">20</option>
                              <option value="21">21</option>
                              <option value="22">22</option>
                              <option value="23">23</option>
                              <option value="24">24</option>
                              <option value="25">25</option>
                              <option value="26">26</option>
                              <option value="27">27</option>
                              <option value="28">28</option>
                              <option value="29">29</option>
                              <option value="30">30</option>
                              <option value="31">31</option>
                            </select>
                          </span>
                        </div>

                        <p ng-show="form_register.bday.$invalid && !form_register.bday.$pristine" class="text-danger">Sorry, but you must be 21 years of age or older.</p>

                        <div class="form-group">
                                <label class="ui-checkbox"><input name="accept_terms" type="checkbox" value="1" data-ng-model="user.accept_terms" required><span>I have Read and Accept the AirTab <a href="/terms" target="_blank">Terms of Use</a></span></label>
                        </div>
                        <input style="position:absolute; top:-2000px" type="number" name="bday" data-ng-model="user.bday" required min="<?=strtotime("100 years ago");?>" max="<?=strtotime("21 years ago")?>">
                            <!--
                            <div class="form-group text-center" style="max-width:300px; position:relative;margin-left:auto;
margin-right:auto;">
                                
                                <p>{captcha}</p>
                                <div class="input-group input-group-m">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-barcode"></span>
                                    </span>
                                    <input type="text"
                                           class="form-control"
                                           placeholder="Enter The Code Above"
                                           name="captcha"
                                           data-ng-model="user.captcha"
                                           required
                                           >
                                </div>
                            </div>-->
                        <div class="form-group form-required-field">
                            <div class="input-group input-group-lg">
                                <span class="input-group-addon required">
                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                </span>
                                <input type="text"
                                        name="age"
                                       class="form-control"
                                       placeholder="Your Age"
                                       value="21"
                                       >
                            </div>
                        </div>
                        <p ng-show="!canSubmit()" class="text-danger">One or more fields are incomplete or invalid. Please check above for any fields bordered in red.</p>
                        <div class="form-group" ng-show="canSubmit()">
                            <input type="hidden" name="invite_id" value="{segment_3}">
                            <button type="submit" class="btn btn-primary btn-lg btn-block" data-ng-disabled="!canSubmit()">Create Account</button>
                        </div>
                    </fieldset>

                    <script type="text/javascript">
        $('#form_register').ajaxForm({
                dataType: 'json',
                success: function(data) {
                        if (data.status == "success") {
                            location.reload();
                        } else {
                            angular.element('#registerCtrl').scope().notify("error", data.heading + ': '+data.content);
                        }
                }
        });

        $('input[name="Phone"]').keypress(function(e)
       {
         var key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];

         if (!($.inArray(e.which, key_codes) >= 0)) {
           e.preventDefault();
         }
       });

        $('.form-required-field').remove();
</script>

                <!--<table width="99%" border="0" align="center" cellpadding="2" cellspacing="0">  
                    <tr>
            <td width="30%" height="30"><label for="FName">First Name</label></td>
            <td width="70%">{field:FName}</td>
                    </tr>
                    <tr><td colspan="2">{error:FName}</td></tr>
                    
                    <tr>
            <td height="30"><label for="LName">Last Name</label></td>
            <td>{field:LName}</td>
                    </tr>
                    <tr><td colspan="2">{error:LName}</td></tr>

                    <tr>
            <td height="30"><label for="LName">Screen Name</label></td>
            <td>{field:screen_name}</td>
                    </tr>
                    <tr><td colspan="2">{error:screen_name}</td></tr>               

                    <tr>
                    <td height="30"><label for="bday_y">Birthday</label></td>
                    <td height="30"><select name="bday_y" id="bday_y">
                    <option value="" selected="selected">Year</option>
                    <option value="2014">2014</option>
                    <option value="2013">2013</option>
                    <option value="2012">2012</option>
                    <option value="2011">2011</option>
                    <option value="2010">2010</option>
                    <option value="2009">2009</option>
                    <option value="2008">2008</option>
                    <option value="2007">2007</option>
                    <option value="2006">2006</option>
                    <option value="2005">2005</option>
                    <option value="2004">2004</option>
                    <option value="2003">2003</option>
                    <option value="2002">2002</option>
                    <option value="2001">2001</option>
                    <option value="2000">2000</option>
                    <option value="1999">1999</option>
                    <option value="1998">1998</option>
                    <option value="1997">1997</option>
                    <option value="1996">1996</option>
                    <option value="1995">1995</option>
                    <option value="1994">1994</option>
                    <option value="1993">1993</option>
                    <option value="1992">1992</option>
                    <option value="1991">1991</option>
                    <option value="1990">1990</option>
                    <option value="1989">1989</option>
                    <option value="1988">1988</option>
                    <option value="1987">1987</option>
                    <option value="1986">1986</option>
                    <option value="1985">1985</option>
                    <option value="1984">1984</option>
                    <option value="1983">1983</option>
                    <option value="1982">1982</option>
                    <option value="1981">1981</option>
                    <option value="1980">1980</option>
                    <option value="1979">1979</option>
                    <option value="1978">1978</option>
                    <option value="1977">1977</option>
                    <option value="1976">1976</option>
                    <option value="1975">1975</option>
                    <option value="1974">1974</option>
                    <option value="1973">1973</option>
                    <option value="1972">1972</option>
                    <option value="1971">1971</option>
                    <option value="1970">1970</option>
                    <option value="1969">1969</option>
                    <option value="1968">1968</option>
                    <option value="1967">1967</option>
                    <option value="1966">1966</option>
                    <option value="1965">1965</option>
                    <option value="1964">1964</option>
                    <option value="1963">1963</option>
                    <option value="1962">1962</option>
                    <option value="1961">1961</option>
                    <option value="1960">1960</option>
                    <option value="1959">1959</option>
                    <option value="1958">1958</option>
                    <option value="1957">1957</option>
                    <option value="1956">1956</option>
                    <option value="1955">1955</option>
                    <option value="1954">1954</option>
                    <option value="1953">1953</option>
                    <option value="1952">1952</option>
                    <option value="1951">1951</option>
                    <option value="1950">1950</option>
                    <option value="1949">1949</option>
                    <option value="1948">1948</option>
                    <option value="1947">1947</option>
                    <option value="1946">1946</option>
                    <option value="1945">1945</option>
                    <option value="1944">1944</option>
                    <option value="1943">1943</option>
                    <option value="1942">1942</option>
                    <option value="1941">1941</option>
                    <option value="1940">1940</option>
                    <option value="1939">1939</option>
                    <option value="1938">1938</option>
                    <option value="1937">1937</option>
                    <option value="1936">1936</option>
                    <option value="1935">1935</option>
                    <option value="1934">1934</option>
                    <option value="1933">1933</option>
                    <option value="1932">1932</option>
                    <option value="1931">1931</option>
                    <option value="1930">1930</option>
                    <option value="1929">1929</option>
                    <option value="1928">1928</option>
                    <option value="1927">1927</option>
                    <option value="1926">1926</option>
                    <option value="1925">1925</option>
                    <option value="1924">1924</option>
                    <option value="1923">1923</option>
                    <option value="1922">1922</option>
                    <option value="1921">1921</option>
                    <option value="1920">1920</option>
                    <option value="1919">1919</option>
                    <option value="1918">1918</option>
                    <option value="1917">1917</option>
                    <option value="1916">1916</option>
                    <option value="1915">1915</option>
                    <option value="1914">1914</option>
                    <option value="1913">1913</option>
                    <option value="1912">1912</option>
                    <option value="1911">1911</option>
                    <option value="1910">1910</option>
                    <option value="1909">1909</option>
                    <option value="1908">1908</option>
                    <option value="1907">1907</option>
                    <option value="1906">1906</option>
                    <option value="1905">1905</option>
                    </select> 
                    <select name="bday_m" id="bday_m">
                    <option value="" selected="selected">Month</option>
                    <option value="01">January</option>
                    <option value="02">February</option>
                    <option value="03">March</option>
                    <option value="04">April</option>
                    <option value="05">May</option>
                    <option value="06">June</option>
                    <option value="07">July</option>
                    <option value="08">August</option>
                    <option value="09">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                    </select> 
                    <select name="bday_d" id="bday_d">
                    <option value="" selected="selected">Day</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    </select>
                    </td>
                    </tr>
                    <tr><td colspan="2">{error:bday_y}{error:bday_m}{error:bday_d}</td></tr>        

                    <tr>
            <td height="30"><label for="email">EMail</label></td>
            <td>{field:email}</td>
                    </tr>
                    <tr><td colspan="2">{error:email}</td></tr> 

                    <tr>
            <td height="30"><label for="password">Password</label></td>
            <td>{field:password}</td>
                    </tr>
                    <tr><td colspan="2">{error:password}</td></tr>              
                    <tr>
                        <td height="30"><label for="password_confirm">Confirm Password</label></td>
                        <td>{field:password_confirm}</td>
                    </tr>
                    <tr><td colspan="2">{error:password_confirm}</td></tr>                          
                </table>
    <br />
    <p>
            {field:accept_terms} <label for="accept_terms">I have Read and Accept the AirTab <a href="/terms" target="_blank">Terms of Use</a></label><br />
            {error:accept_terms}
    </p>

    <p>
    {if captcha}
            Please enter the following characters into the box below:<br />
            {captcha}<br />
            {field:captcha}<br />
            {error:captcha}
    {/if}
    </p>

    <p>
            
    </p>-->

                    {/exp:simple_registration:form}
                </div>

            </div>
        </div>
    </section>
    </div>
</div>
<div style="padding-bottom:40px">&nbsp;</div>
{if segment_3 == "android"}<script>parent.hideLoading()</script>{/if}